<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>名刺管理システム</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
  <style>
    .min-h-screen { min-height: 100vh; background-color: #f7fafc; }
    .bg-gray-100 { background-color: #f7fafc; }
    .bg-white { background-color: #ffffff; }
    .text-gray-800 { color: #2d3748; }
    .text-gray-700 { color: #4a5568; }
    .text-gray-600 { color: #718096; }
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .shadow-md { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
    .p-4 { padding: 1rem; }
    .p-6 { padding: 1.5rem; }
    .mt-4 { margin-top: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
  </style>
</head>
<body>
  <div id="app" class="min-h-screen bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">名刺管理システム</h1>
        <div class="flex gap-2">
          <button
            @click="handleTest"
            class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600"
          >
            <i class="fas fa-vial mr-2"></i>テスト
          </button>
          <button
            @click="showForm = !showForm"
            class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
          >
            <i class="fas fa-plus mr-2"></i>新規名刺
          </button>
        </div>
      </div>

      <div class="bg-white p-4 rounded-lg shadow-md mb-6">
        <div class="flex gap-4">
          <input
            type="text"
            placeholder="名前または会社名で検索"
            v-model="searchTerm"
            class="border p-2 rounded flex-1"
          />
          <button
            @click="searchTerm = ''"
            class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>

      <form v-if="showForm" @submit.prevent="handleSubmit" class="bg-white p-6 rounded-lg shadow-md mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input type="text" name="name" placeholder="名前" v-model="formData.name" class="border p-2 rounded" required />
          <input type="text" name="company" placeholder="会社名" v-model="formData.company" class="border p-2 rounded" required />
          <input type="text" name="position" placeholder="役職" v-model="formData.position" class="border p-2 rounded" />
          <input type="email" name="email" placeholder="メールアドレス" v-model="formData.email" class="border p-2 rounded" />
          <input type="tel" name="phone" placeholder="電話番号" v-model="formData.phone" class="border p-2 rounded" />
          <input type="date" name="date" v-model="formData.date" class="border p-2 rounded" />
        </div>
        <div class="mt-4 flex justify-end">
          <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">保存</button>
        </div>
      </form>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div v-for="card in filteredCards" :key="card.id" class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="text-lg font-bold mb-2">{{ card.name }}</h3>
          <p class="text-gray-700">{{ card.company }}</p>
          <p class="text-gray-600">{{ card.position }}</p>
          <div class="mt-2">
            <p class="text-sm">
              <i class="fas fa-envelope mr-2"></i>{{ card.email }}
            </p>
            <p class="text-sm">
              <i class="fas fa-phone mr-2"></i>{{ card.phone }}
            </p>
            <p class="text-sm">
              <i class="fas fa-calendar mr-2"></i>{{ card.date }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3"></script>
  <script>
    const app = Vue.createApp({
      data() {
        return {
          cards: [],
          showForm: false,
          searchTerm: "",
          formData: {
            name: "",
            company: "",
            position: "",
            email: "",
            phone: "",
            date: "",
          },
        };
      },
      computed: {
        filteredCards() {
          return this.cards.filter(card =>
            card.name.toLowerCase().includes(this.searchTerm.toLowerCase()) ||
            card.company.toLowerCase().includes(this.searchTerm.toLowerCase())
          );
        }
      },
      methods: {
        handleInputChange(e) {
          this.formData[e.target.name] = e.target.value;
        },
        handleSubmit() {
          this.cards.push({ ...this.formData, id: Date.now() });
          this.formData = { name: "", company: "", position: "", email: "", phone: "", date: "" };
          this.showForm = false;
        },
        async handleTest() {
          try {
            const response = await fetch("https://cotton-concrete-catsup.glitch.me/create_test");
            const data = await response.json();
            console.log(data);
          } catch (error) {
            console.error("Error:", error);
          }
        }
      }
    }).mount("#app");
  </script>
</body>
</html>
